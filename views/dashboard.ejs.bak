<!DOCTYPE html>
<html>
<head>
  <title></title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!--
        Stylesheets and Preprocessors
        ==============================
        You can always bring in CSS files manually with `<link>` tags, or asynchronously
        using a solution like AMD (RequireJS).  Or, if you like, you can take advantage
        of Sails' conventional asset pipeline (boilerplate Gruntfile).
        By default, stylesheets from your `assets/styles` folder are included
        here automatically (between STYLES and STYLES END). Both CSS (.css) and LESS (.less)
        are supported. In production, your styles will be minified and concatenated into
        a single file.
        To customize any part of the built-in behavior, just edit `tasks/pipeline.js`.
        For example, here are a few things you could do:
            + Change the order of your CSS files
            + Import stylesheets from other directories
            + Use a different or additional preprocessor, like SASS, SCSS or Stylus
    -->
  <style>
  </style>

  <!--STYLES-->
  <link rel="stylesheet" href="/styles/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/styles/bootstrap.min.css">
  <link rel="stylesheet" href="/styles/daterangepicker.css">
  <link rel="stylesheet" href="/styles/default.css">
  <link rel="stylesheet" href="/styles/fileinput.min.css">
  <link rel="stylesheet" href="/styles/importer.css">
  <!--STYLES END-->
  <!-- Latest compiled and minified CSS -->
</head>

<body>
  <!-- nav bar -->
  <% include host.navbar.ejs %>

  <div class="container-fluid">
    <div class="row">
      <!-- left panel -->
      <div class="col-sm-3 col-md-2 sidebar">
        <% include host.sidebar.ejs %>
      </div>

      <!-- right panel -->
      <div id="root" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
      </div>

    </div>
  </div>

</body>
</html>

<!--SCRIPTS-->
<script src="/js/dependencies/sails.io.js"></script>
<script src="/js/dependencies/jquery-3.2.1.min.js"></script>
<script src="/js/dependencies/browser.min.js"></script>
<script src="/js/dependencies/react.js"></script>
<script src="/js/dependencies/react-dom.js"></script>
<script src="/js/dependencies/fileinput/piexif.min.js"></script>
<script src="/js/dependencies/fileinput/purify.min.js"></script>
<script src="/js/dependencies/fileinput/sortable.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/moment.min.js"></script>
<script src="/js/plugins/daterangepicker/daterangepicker.js"></script>
<script src="/js/plugins/fileinput/fileinput.min.js"></script>
<script src="/js/plugins/fileinput/locale/zh.js"></script>
<script src="/js/underscore.js"></script>
<!--SCRIPTS END-->

<script >

  $('.nav li a').click((evt) => {
    evt.preventDefault();
    $('.nav li').removeClass('active');
    $(evt.target).parent().addClass('active');

    var tmpl = $(evt.target).attr('data-tmpl');
    var jst_tmpl = typeof tmpl == 'undefined' ? '' : this['JST'][`assets/templates/${tmpl}`]();
    $('#root').html(jst_tmpl);

    /*
    $("#housepic").fileinput({
      showPreview: true,
      uploadAsync: false,
      uploadUrl:"",
    })

    $("#ownershippic").fileinput({
      showPreview: true,
      uploadAsync: false,
      uploadUrl:"",
    })
    */
  });

  $(document).on('submit', 'form', (evt) => {
    evt.preventDefault();
    $.post($('form').attr('action'), $('form').serialize(), (data) => {
      var jst_tmpl = this['JST'][`assets/templates/alert-dismissible.html`]({
        type: 'alert-success', title: 'Good job!', info: 'New record success'
      });

      $('#root').append(jst_tmpl);
    });
  });

  $(document).on('click', 'form .btn-submit', (evt) => {
    evt.preventDefault();
    $('form').submit();
  });


</script>

<!--TEMPLATES-->
<script type="text/javascript" src="/jst.js"></script>
<!--TEMPLATES END-->


